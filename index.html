
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;php&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="php">php</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#update-trip-type-availability" class="toc-h2 toc-link" data-title="Update trip type availability">Update trip type availability</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://github.com/arcticres/arctic-api'>PHP Framework</a></li>
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Arctic Reservations offers a REST API that allows reading and writing information from installations. You can use the API to connect third party software, develop custom tools or build additional website integration.</p>

<p>We have a flexible <a href="https://github.com/arcticres/arctic-api">PHP implementation of the API</a>, but the documentation provides more general instructions should you want to implement a custom implementation or use a different language.</p>

<p>This documentation is a new project, and is in the early stages. More information will be added soon.</p>
<h2 id='update-trip-type-availability'>Update trip type availability</h2>
<p>This endpoint allows you to batch update availability information for a trip type. The request includes an array of trip start dates and times. By default, Arctic will make the necessary changes so that the trip calendar in Arctic matches the provided list of start dates and times, including creating trips, updating openings and canceling trips.</p>
<pre class="highlight php tab-php"><code>require 'init.i.php';

$trip_type = \Arctic\Model\Trip\TripType::load(1);
$response = $trip_type-&gt;updateAvailability([
    'range' =&gt; [
        'start' =&gt; '2019-03-15',
        'end' =&gt; '2019-12-15',
    ],
    'trips' =&gt; [
        [
            'openings' =&gt; 16,
            'notes' =&gt; 'Testing'
        ],
        [
            'start' =&gt; '2019-05-01',
            'openings' =&gt; 20
        ],
        [
            'start' =&gt; '2019-06-01',
            'openings' =&gt; 20,
        ]
    ]
]);
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://example.com/api/kittens/2"</span>
  -H <span class="s2">"Authorization: Bearer token"</span>
  -H <span class="s2">"Content-Type: application/json"</span>
  -d @request.json
</code></pre>
<blockquote>
<p>The availability function takes a JavaScript payload as follows:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-15"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-06-15"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"trips"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-04-01 14:00:00"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"openings"</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w">
            </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Testing"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-01 14:00:00"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"openings"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-06-01 13:00:00"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"openings"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>The above payload may generate the following result:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">743</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">745</span><span class="p">,</span><span class="w">
            </span><span class="s2">"delta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"openings"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">22</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">747</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancel"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">749</span><span class="p">,</span><span class="w">
            </span><span class="s2">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-07-23 00:00:00"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"has_reservations"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://outfitter.arcticres.com/api/rest/triptype/&lt;ID&gt;/availability</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ID</td>
<td>The ID of the trip type</td>
</tr>
</tbody></table>
<h3 id='body-attributes'>Body Attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>create</td>
<td>boolean</td>
<td><code>true</code></td>
<td>Trip starts in &quot;trips&quot; that do not exist in Arctic should be created.</td>
</tr>
<tr>
<td>update</td>
<td>boolean</td>
<td><code>true</code></td>
<td>Trip starts in &quot;trips&quot; that have different availability or notes should be updated.</td>
</tr>
<tr>
<td>cancel</td>
<td>boolean</td>
<td><code>true</code></td>
<td>Trip starts in Arctic that do not exist in &quot;trips&quot; should be canceled. If any trips have reservations, an alert will appear on the dashboard to notify reservationists.</td>
</tr>
<tr>
<td>simulate</td>
<td>boolean</td>
<td><code>false</code></td>
<td>If true, the update will only be simulated. The result object will return the changes that are pending.</td>
</tr>
<tr>
<td>range</td>
<td>object</td>
<td></td>
<td>By default, the availability update will effect all trips starting now indefinitely into the future.</td>
</tr>
<tr>
<td>trips</td>
<td>array</td>
<td><em>required</em></td>
<td>An array of &quot;trip&quot; objects.</td>
</tr>
</tbody></table>
<h4 id='body-range-object'>Body: <code>range</code> Object</h4>
<p>If you want to apply to the update to a specific time range, include a &quot;start&quot; and &quot;end&quot; date or date time, specifying the range to update.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start</td>
<td>date or datetime</td>
<td><em>required</em></td>
<td>Start of the range to update.</td>
</tr>
<tr>
<td>end</td>
<td>date or datetime</td>
<td><em>required</em></td>
<td>End of the range to update. If &quot;end&quot; is a date, it is inclusive. If &quot;end&quot; is a datetime, it is exclusive.</td>
</tr>
</tbody></table>
<h4 id='body-trip-object'>Body: <code>trip</code> Object</h4>
<p>The <code>trips</code> array contains 0 or more trips. The trip object describes when the trip starts and how many openings it has.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start</td>
<td>date or datetime</td>
<td><em>required</em></td>
<td>The start date or the start date and time of the trip.</td>
</tr>
<tr>
<td>openings</td>
<td>int</td>
<td></td>
<td>Number of openings the trip should have.</td>
</tr>
<tr>
<td>remainingopenings</td>
<td>int</td>
<td></td>
<td>Number of openings the trip should have that are still available.</td>
</tr>
<tr>
<td>notes</td>
<td>string</td>
<td></td>
<td>A note about the trip.</td>
</tr>
</tbody></table>

<p>The <code>trip</code> object can either specifying <code>openings</code> or <code>remainingopenings</code>, but not both. If neither are specified, the openings will not be changed (the default openings will be used when creating trips).</p>
<h3 id='response-attributes'>Response Attributes</h3>
<p>The response has a result array where each entry specifies what action was taken for the provided list of trip start dates and times. Additional result entries will be added for trips that existed in Arctic, but were not in the provided list, and as a result were canceled.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>results</td>
<td>array</td>
<td>An array of &quot;result&quot; objects.</td>
</tr>
</tbody></table>
<h4 id='response-result-object'>Response: <code>result</code> Object</h4>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>action</td>
<td>string</td>
<td>One of &quot;create&quot; (trip created), &quot;update&quot; (trip updated), &quot;cancel&quot; (trip canceled) or &quot;nothing&quot; (if the relevant action was disabled in the request).</td>
</tr>
<tr>
<td>id</td>
<td>int</td>
<td>The ID of the trip that was created, updated or canceled (not available when simulating creations).</td>
</tr>
<tr>
<td>delta</td>
<td>object</td>
<td>An object describing the changes when updating a trip.</td>
</tr>
<tr>
<td>start</td>
<td>date or datetime</td>
<td>The date or datetime of the trip (when canceling a trip).</td>
</tr>
<tr>
<td>has_reservations</td>
<td>boolean</td>
<td>Whether or not a trip had reservations (when canceling a trip).</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="php">php</a>
          </div>
      </div>
    </div>
  </body>
</html>
